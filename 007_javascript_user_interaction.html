<!doctype html>
<title>How to change webpages after loading, using Javascript</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<p>
With HTML and CSS we have seen how to create the content of a webpage,
and how to control its presentation. However, once a given webpage has been
loaded in the browser, both the content and its apperance will remain unaltered
if we do not interact with the browser window. In some situations, modifying the
content is desired: for example, we may want to connect to some other
Internet webpage (e.g., our favorite news site), and grab some information
from it (e.g., breaking news) and print that information in some text area of
our webpage; and we want to do this periodically (e.g., each minute).
We may also want to allow the user to interact with the webpage in some
way: for example, use a button to allow the user to change the background color
of a page, or to eliminate a figure, or add a paragraph with some information
that the user writes, etc. Javascript is a language that is used for these
tasks, which are usually called dynamic effects becasue they allow to change
the content and presentation of a webpage according to the logic that the
programmer wants.
</p>
<p>
Javascript instructions are usually stored in text files with extension <b>js</b>.          
For example, a file named <b>example.js</b> would be a Javascript file.               
When writing an HTML file whose content we will like to control                
via Javascript, we need to indicate to the browser the path to the 
javascript file that we want to use, by means of the <b>script</b> element, with
an attribute named <b>src</b> whose value is the path to the javascript file
relative to the folder where the HTML file is, like this:
<pre>
  &lt;script src="whatever-path-to-the-js-file" defer&gt;&lt;/script&gt;
</pre>
</p>
<p>
Observe that the script element has an opening and a closing tag, without any content
in between the two tags. The optional attribute <b>defer</b> is used to tell the browser
to finish downloading the full HTML file before doing anything indicated inside the
HTML file, which is usually a good idea ---because the Javascript file is basically instructions
affecting elements inside the HTML file, and if Javascript instructions refer to elements
that still have not been seen by the browser, it will not be able to run those instructions.
</p>
                                                                              
For example, if you see the following code inside an HTML file                     
 <title>Example</title>                                                         
 <html>
   <head>
     <link src="thingies/stuff/stylenumber1.css">                                   
     <link src="thingamajig/someweirdstyle.css">                                    
     <script src="morestuff/something.js" defer></script>                           
     <script src="blabla/prrr/something2.js"></script>                              
     <script src="interestingeffectsjs" defer></script>                             
     
    
 that means that:                                                               
 1) the html webpage will get its CSS instructions                              
 from two files: one named stylenumber1.css that is inside a folder named       
 stuff that is inside a folder named thingies, which is in the same             
 folder as the html file itself; and another named someweirdstyle.vss           
 located in a folder named thingamajig that is in the same folder as the        
 html file                                                                      
 2) the html webpage will get its Javascript instructions from three            
 files:                                                                         
  a) one located in a file named something.js located in a folder named         
     morestuff located in the same folder as the html file                      
     and whose instructions need to wait to be executed until the browser       
     has finished downloading all the page info (this is because we wrote the attribute defer),                                
  b) from another named something2.js located in a folder named                 
     prrr which is inside a folder named blabla located inside the same         
     folder as the html file, and whose instructions do not need to wait        
     until the downloading of the HTML file (because it does not have the       
     defer attribute, and thus would be executed immediately once the          
     browser sees that line in the HTML file), and                               
  c) from another called interestingeffects.js located inside the same          
     folder as the HTML file, and whose instructions need to wait until         
     the browser has finished downloading the entire html webpage.              
                                                                                
 In general, most html files that we write will only include just one css file, and just 
 one Javascript file.                                                                          
                                                                                
 Let's now see how to use the Javascript language to command the browser            
 to do something that we want it to do.                  
   
 In Javascript, the word <b>document</b> means the entire webpage:                     
 In Javascript, the expression <b>document.getElementById("holaazu")</b> means to      
 get the webpage, and inside it (the dot means to go inside), get              
 the HTML element with the id "holaazu". That element could be                  
 a paragraph, a header, a list, an image, a div, etc.). For example,            
 document.getElementById("bocadillo")                                            
 means to get the element whose id is "bocadillo". If that element does         
 not exist, then the browser will not do anything. Otherwise, it will           
 do whatever we indicate later.                                                 
 
 For example, imagine that we want to create a webpage with three               
 buttons:                                                                       
 1) one whose id we choose to be: redbutton, with the text 'Pulse here to change to red'      
    and that, when the user clicks on it, the background color of the           
    entire webpage changes to red.                                              
 2) one whose id we choose to be: greenbutton, with the text 'Pulse here to change to green'  
    and that, when the user clicks on it, the background color of the           
    entire webpage changes to green.                                            
 3) one whose id we choose to be: bluebutton, with the text 'Pulse here to change to blue'    
    and that, when the user clicks on it, the background color of the           
    entire webpage changes to blue.                                             
 When any page loads, the background color is white, because                    
 that is color that most browsers use by default. Thus, we will use these three            
 buttons to change the background color of the page. In order to tell the                   
 browser to change the background color to red when a user clicks it,           
 we write in the Javascript file as follows:                                    
                                                                                
Document.getElementById("redbutton").onclick = change_to_red_background;        
function change_to_red_background() {                                           
  Document.body.style.backgroundColor = "red";                                  
}                                
 In Javascript, lines that have equal signs (called assignments) usually
 end in a semicolon; it is optional, but it is recommended practice to
 write it. Javascript is a case sensitive language: the word document, which
 means the webpage, is not the same as the word Document, or DOCUMENT, or other
 variations, which do not have any predefined meaning in the language. Care
 should be taken when writing Javascript programs regarding the case of the words,
 because it is a common source of errors.
     
 The first line has an equal sign. Lines with an equal sign are                 
 easier to understand by reading the left part backwards, and then              
 the right part. So, in this example, we can read that line as:                 
 when the user clicks (indicate via the word 'onclick', which is a              
 special word in the Javascript language that means 'a user clicks')            
 on the element whose id is redbutton (indicated via the word getElementById    
 and the label 'redbutton' that we freely assigned to the button inside         
 the html file) inside the webpoage (indicated via the word Document, which     
 means the webpage in Javascript), then execute the instruction named           
 change_to_red_background, which is a name that we just invented. This          
 invented name is called a function, and it basically is a series of            
 Javascript sentences that we need to create in order to do whatever            
 it is that we want to do when the user clicks in the button: in this           
 case, it is changing the background color to red. We selected the              
 name change_to_red_background because it is expressive of what the             
 function does, which is the recommended way; however, it could have            
 any other name, like function123, or tonto_el_que_lo_lea, and it               
 would be correct as well. It is considered a good programming         
 practice to use names that are expressive of what the function does, and       
 that usually means using a verb followed by distinctive characteristics:       
 in this case: change_to_red_background. The choice of separating the           
 words via underscores is optional; each programmer has its own style:          
 an alternative option is camel case, like: changeToRedBackground. Use whatever       
 you prefer.                                
    
 In summary, the first line tells the browser "when a user clicks on the element         
 whose id is redbutton, do the instructions contained in the function           
 named change_to_red_background". So now, the only thing remaining is           
 to create that function and use to tell the browser to change the              
 page background color to red. That is done by the lines:                       
 function change_to_red_background()                                            
  document.body.style.backgroundColor = "red";                                  
 }                                                                              
 The first line tells Javascript that we are about to say what is exactly            
 the change_to_red_background function that we referenced before.               
 The function can be anywhere in the Javascript document, it does               
 not have to be following the line with the onclick isntruction.                
 The function is defined with the word function, then the name that             
 we selected, two parentheses that may not have anything between them,          
 or may have something (we will see that later), and then the function          
 instructions between braces {}. It is common to indent the instructions
 inside the function with respect to the line with the word function, and
 the closing brace is commonly put at the same level as the letter f in function.
 In our case, the function istructions is just a single one because             
 Javascript allows us to change the background of the webpage with              
 just a single instruction:                          
   document.body.style.backgroundColor = "red";                                    
 This line means that "red" will be the background color of the body            
 element of the HTML page (the body is the entire visible area                  
 of the webpage, and is indicated with the tag <body> in the HTML file,         
 although taht tag is optional, because the browser will act as if it           
 is written even if we do not write it).                       
                                      
 When working with functions in Javascript, it is important to know
 when to use parenthesis after the name, and when not. In general,
 if we need to indicate the name of the function, but not run it,
 we do not write the parentheses. When we need tio run it, or when we
 are defining it (i.e., describing the instructions that it does), we need
 the parentheses. For example, inside the line document.getElementById("redbutton").onclick = change_to_red_background;
 we are telling the browser which function will run once the user clicks, but we do not
 want to run it now, so the change_to_red_background name does not have parenthesis after it
 (this is, it is not change_to_red_background). In contrast, the line
 function change_to_red_background() {                                           
 does have parentheses after the function name because it defines the function. If, at some
 point in the Javascript file, we see change_to_red_background() somewhere, that means
 that we want the browser to execute the instructions inside the function in that precise
 moment (what is called to run the function). If, on the other hand, we see just change_to_red_background
     without parentheses, that means that we want to tell the browser something related to the
     function, but we do not want to run it in that moment.
     
 So imagine that we have an html file named "example.html" as follows:
 <pre>
 &lt;!doctype HTML&gt;                                                           
&lt;html&gt;                                                                    
&lt;head&gt;                                                                    
&lt;script src="backgroundcolor.js" defer&gt;&lt;/script&gt;                    
&lt;/head&gt;                                                                   
&lt;body&gt;                                                                    
&lt;input type='button' id="redbutton" value="Click here to change to red"&gt;  
&lt;input type='button' id="greenbutton" value="Click here to change to green"&gt;
&lt;input type='button' id="bluebutton" value="Click here to change to blue"&gt;
&lt;/body&gt;                                                                   
&lt;/html&gt;     
 </pre>
 and a Javascript file named "backgroundcolors.js" as follows:
 <pre>
 document.getElementById("redbutton").onclick = change_to_red_background;        
function change_to_red_background() {                                           
  document.body.style.backgroundColor = "red";                                  
}                                                                               
document.getElementById("greenbutton").onclick = change_to_green_background;    
function change_to_green_background() {                                         
  document.body.style.backgroundColor = "green";                                
}                                                                               
document.getElementById("bluebutton").onclick = change_to_blue_background;      
function change_to_blue_background() {                                          
  document.body.style.backgroundColor = "blue";                                 
}                                               
 </pre>
 
 It is interesting to see the effect of the word defer in the <b>script</b> tag
     in the HTML file. If we do not write it,
     and laod the html file, and try to use the buttons, we will see that they
     do not appear to have any effect. What happens is:
 1) the browser starts loading the html file: it processes the doctype line,
     and the html opening tag, and the head tag, and then the script tag with
     the src attribute telling it to load the backgroundcolor.js file and, since
     there is no defer attribute, it will process it right now before continuing
     with the next line of the HTML file (the one with the closing head tag)
 2) the Javascript file, in its first line, tells the browser to get the element whose
     id is redbutton, and do something to it (basically what we explained above: assign
     a function to be run when a user clicks). However, the browser still did not get
     to process the part of the HTML file that defines the button whose id is redbutton
     (because it is defined in an <b>input</b> tag that appears in the HTML file
     after the <b>script</b> tag that it is currently processing). Thus, the browser
     does not know what element is that, and as a result, it does not do anything.
     Then, it sees the definition of the function, and takes notice of it just in
     case it is used later somewhere (which in our example is not), then processes
     the element whose id is greenbutton, which cannot be found due to the same
     reason as redbutton, and then the same with bluebutton.
     
  So, if we do not write the attribute <b>defer</b> in the script tag of the
     javascript file, the buttons will not do anything, because the instructions
     that tell the browser what to do when the user clicks, run only once, when
     the script is loaded, and they run before the downloading of the entire HTML
     page is done. This is solved by using the word <b>defer</b>, whcih tells the
     browser to finish downloading the whole HTML file before processing the Javascript
     file; thus, the browser, when the webpage is loaded, or reloaded, will 
     read the line with the doctype, then the html and body tags, then the 
     line with the script tag (but will not process that script yet because it 
     has the defer attribute), then the closing head tag,, then the openingnbody tag,
     then the three buttons, and then the closing body and html tags, and then, and only then,
     it will process the Javascript script. Thus, since the browser has already seen
     the button definitions, when it processes the lines <b>document.getEleemnetById("redbutton").onclick = ...</b>
     it will already know what are those buttons, so the buttons will work as expected.

                                         
